#!/bin/bash

set -e

if [ -z "$1" ]; then
  echo "Usage: bin/generate <language>"
  exit 0
fi


generate_ruby() {
  mkdir -p generated/ruby
  rm -rf generated/ruby/*
  mvn clean compile -f poms/pom-ruby.xml
}

generate_java() {
  mkdir -p generated/java
  rm -rf generated/java/*
  mvn clean compile -f poms/pom-java.xml
  rm -rf poms/target
}


case $1 in
  ruby) generate_ruby;;
  java) generate_java;;
  *) echo "Unrecognized language $1. Must be one of: java, ruby";;
esac
